# ICMP

Internet Control Message Protocol. 因特网控制报文协议。

位于 OSI 网络层。向数据通讯中的源主机报告错误。

实现差错通知和信息查询。



类型：标识生成的错误报文

代码：表示错误原因

校验和：存储ICMP的校验和值

保留字段：设值为0

数据：包含所有接收到的数据包的

![这里写图片描述](https://img-blog.csdn.net/201805301801365?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM3OTY0MDcx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

| 类型 | 描述                                            |
| ---- | ----------------------------------------------- |
| 0    | 回应应答（Ping应答，与类型8的Ping请求一起使用） |
| 3    | 目的不可达                                      |
| 4    | 源消亡                                          |
| 5    | 重定向                                          |
| 8    | 回应请求（Ping请求，与类型8的Ping应答一起使用） |
| 9    | 路由器公告（与类型10一起使用）                  |
| 10   | 路由器请求（与类型9一起使用）                   |
| 11   | 超时                                            |
| 12   | 参数问题                                        |
| 13   | 时标请求（与类型14一起使用）                    |
| 14   | 时标应答（与类型13一起使用）                    |
| 15   | 信息请求（与类型16一起使用）                    |
| 16   | 信息应答（与类型15一起使用）                    |
| 16   | 地址掩码请求（与类型18一起使用）                |
| 16   | 地址掩码应答（与类型17一起使用）                |



报文类型可归纳为以下5类：

1. 诊断报文（类型8，代码0； 类型0， 代码0）；
2. 目的不可达报文（类型3，代码0-15）；
3. 重定向报文（类型5，代码0-4）；
4. 超时报文（类型11，代码0-1）；
5. 信息报文（类型12-18）；



![1573795041528](C:\Users\E10S\AppData\Roaming\Typora\typora-user-images\1573795041528.png)